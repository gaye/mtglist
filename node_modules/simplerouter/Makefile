.PHONY: all
all: router.js

.PHONY: clean
clean:
	rm -rf router.js build node_modules

router.js: node_modules build build.js
	./node_modules/.bin/r.js -o ./build.js

build: node_modules $(shell find js/ -name "*.js")
	mkdir -p build
	./node_modules/.bin/babel js \
		--experimental \
		--out-dir build \
		--source-maps

node_modules: package.json
	npm install
